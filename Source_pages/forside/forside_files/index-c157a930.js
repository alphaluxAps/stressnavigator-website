import{r as x,R as C}from"./index-ef3c7d47.js";import{R as X}from"./index-ffb4245c.js";import{b as ee,u as ge,F as ve}from"./index.esm-a1075f2c.js";import{o as ye}from"./yup-0fe3f7f9.js";import{i as we}from"./Sentry-aebb7817.js";import{i as be,v as _e}from"./i18n-3893a76c.js";import{T as Oe}from"./ToastProvider-58826785.js";import{P as U}from"./index-dd84ea2a.js";import{m as N}from"./main-c08db486.js";import{g as Ce}from"./_commonjsHelpers-f17db62c.js";import{H as Pe}from"./Helmet-2624ee75.js";import{u as Se,E as Ee,a as Ae,G as ke,A as Ie}from"./EmbeddedCheckoutForm-7d35c3ce.js";import{j as K}from"./jsx-runtime-b77bee81.js";import{k as Le}from"./index-50bb0258.js";import{C as Ge}from"./PhoneInput-72eccd6d.js";import{u as Me}from"./i18next-874ad839.js";import{E as Te}from"./errorboundary-26546b2a.js";import"./index-bb12d89a.js";import"./sdk-86249915.js";import"./clientInfo-16c2cd18.js";import"./hoist-non-react-statics.cjs-1f1a8335.js";import"./Lazy-cbc23e4a.js";import"./_baseIteratee-21da714d.js";import"./util-bd4b966e.js";import"./index-2f617914.js";import"./middleware-8d62c445.js";import"./index-1de03533.js";import"./SalesTax-90e51776.js";import"./lodash-81553200.js";import"./stripe.esm-c5f1c10b.js";import"./utils-a430c781.js";import"./moment-02fedcb7.js";import"./CustomFields-d50a98a4.js";import"./capitalize-78422db6.js";import"./capitalize-d8946951.js";import"./toString-09e1e62c.js";import"./_baseGetTag-07b5ce32.js";import"./_arrayMap-72cd112c.js";import"./isArray-df7ab702.js";import"./isSymbol-0ac7558b.js";import"./isObjectLike-d188d688.js";import"./upperFirst-512a67ab.js";import"./_stringToArray-05ced64a.js";import"./_baseSlice-35988e44.js";import"./uuid-fbc100ee.js";import"./index-8daa3ec5.js";import"./warning-14c5eef2.js";/* empty css                         */import"./buildMatchPatternFn-59afc3cf.js";import"./toDate-59d321cd.js";import"./useCheckoutLayoutStyles-f415bb13.js";import"./QuantitySelector-b62dd960.js";import"./index-21e6db36.js";var se={},ce={},fe={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(){for(var h=arguments.length,y=new Array(h),_=0;_<h;_++)y[_]=arguments[_];if(typeof window<"u"){var s;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(s=window).gtag.apply(s,y)}},u=i;r.default=u})(fe);var de={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=_;var i=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function u(s){return s.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(g,b,m){return b>0&&b+g.length!==m.length&&g.search(i)>-1&&m.charAt(b-2)!==":"&&(m.charAt(b+g.length)!=="-"||m.charAt(b-1)==="-")&&m.charAt(b-1).search(/[^\s-]/)<0?g.toLowerCase():g.substr(1).search(/[A-Z]|\../)>-1?g:g.charAt(0).toUpperCase()+g.substr(1)})}function d(s){return typeof s=="string"&&s.indexOf("@")!==-1}var h="REDACTED (Potential Email Address)";function y(s){return d(s)?(console.warn("This arg looks like an email address, redacting."),h):s}function _(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=s||"";return g&&(m=u(s)),b&&(m=y(m)),m}})(de);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.GA4=void 0;var i=_(fe),u=_(de),d=["eventCategory","eventAction","eventLabel","eventValue","hitType"],h=["title","location"],y=["page","hitType"];function _(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(t==null)return{};var n=g(t,e),o,c;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(c=0;c<l.length;c++)o=l[c],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}function g(t,e){if(t==null)return{};var n={},o=Object.keys(t),c,l;for(l=0;l<o.length;l++)c=o[l],!(e.indexOf(c)>=0)&&(n[c]=t[c]);return n}function b(t){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(t)}function m(t){return I(t)||A(t)||M(t)||E()}function E(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I(t){if(Array.isArray(t))return D(t)}function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,o)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T(Object(n),!0).forEach(function(o){P(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function j(t,e){return W(t)||z(t,e)||M(t,e)||R()}function R(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(t,e){if(t){if(typeof t=="string")return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}}function D(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function z(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var o,c,l,w,O=[],S=!0,k=!1;try{if(l=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;S=!1}else for(;!(S=(o=l.call(n)).done)&&(O.push(o.value),O.length!==e);S=!0);}catch(G){k=!0,c=G}finally{try{if(!S&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(k)throw c}}return O}}function W(t){if(Array.isArray(t))return t}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,f(o.key),o)}}function F(t,e,n){return e&&q(t.prototype,e),n&&q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function P(t,e,n){return e=f(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){var e=a(t,"string");return b(e)==="symbol"?e:String(e)}function a(t,e){if(b(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e||"default");if(b(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p=function(){function t(){var e=this;V(this,t),P(this,"reset",function(){e.isInitialized=!1,e._testMode=!1,e._currentMeasurementId,e._hasLoadedGA=!1,e._isQueuing=!1,e._queueGtag=[]}),P(this,"_gtag",function(){for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];e._testMode||e._isQueuing?e._queueGtag.push(o):i.default.apply(void 0,o)}),P(this,"_loadGA",function(n,o){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!e._hasLoadedGA){var l=document.createElement("script");l.async=!0,l.src="".concat(c,"?id=").concat(n),o&&l.setAttribute("nonce",o),document.body.appendChild(l),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},e._hasLoadedGA=!0}}),P(this,"_toGtagOptions",function(n){if(n){var o={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},c=Object.entries(n).reduce(function(l,w){var O=j(w,2),S=O[0],k=O[1];return o[S]?l[o[S]]=k:l[S]=k,l},{});return c}}),P(this,"initialize",function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!n)throw new Error("Require GA_MEASUREMENT_ID");var c=typeof n=="string"?[{trackingId:n}]:n;e._currentMeasurementId=c[0].trackingId;var l=o.gaOptions,w=o.gtagOptions,O=o.nonce,S=o.testMode,k=S===void 0?!1:S,G=o.gtagUrl;if(e._testMode=k,k||e._loadGA(e._currentMeasurementId,O,G),e.isInitialized||(e._gtag("js",new Date),c.forEach(function(B){var re=L(L(L({},e._toGtagOptions(L(L({},l),B.gaOptions))),w),B.gtagOptions);Object.keys(re).length?e._gtag("config",B.trackingId,re):e._gtag("config",B.trackingId)})),e.isInitialized=!0,!k){var H=m(e._queueGtag);for(e._queueGtag=[],e._isQueuing=!1;H.length;){var ne=H.shift();e._gtag.apply(e,m(ne)),ne[0]==="get"&&(e._isQueuing=!0)}}}),P(this,"set",function(n){if(!n){console.warn("`fieldsObject` is required in .set()");return}if(b(n)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(n).length===0&&console.warn("empty `fieldsObject` given to .set()"),e._gaCommand("set",n)}),P(this,"_gaCommandSendEvent",function(n,o,c,l,w){e._gtag("event",o,L(L({event_category:n,event_label:c,value:l},w&&{non_interaction:w.nonInteraction}),e._toGtagOptions(w)))}),P(this,"_gaCommandSendEventParameters",function(){for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];if(typeof o[0]=="string")e._gaCommandSendEvent.apply(e,m(o.slice(1)));else{var l=o[0],w=l.eventCategory,O=l.eventAction,S=l.eventLabel,k=l.eventValue;l.hitType;var G=s(l,d);e._gaCommandSendEvent(w,O,S,k,G)}}),P(this,"_gaCommandSendTiming",function(n,o,c,l){e._gtag("event","timing_complete",{name:o,value:c,event_category:n,event_label:l})}),P(this,"_gaCommandSendPageview",function(n,o){if(o&&Object.keys(o).length){var c=e._toGtagOptions(o),l=c.title,w=c.location,O=s(c,h);e._gtag("event","page_view",L(L(L(L({},n&&{page_path:n}),l&&{page_title:l}),w&&{page_location:w}),O))}else n?e._gtag("event","page_view",{page_path:n}):e._gtag("event","page_view")}),P(this,"_gaCommandSendPageviewParameters",function(){for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];if(typeof o[0]=="string")e._gaCommandSendPageview.apply(e,m(o.slice(1)));else{var l=o[0],w=l.page;l.hitType;var O=s(l,y);e._gaCommandSendPageview(w,O)}}),P(this,"_gaCommandSend",function(){for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];var l=typeof o[0]=="string"?o[0]:o[0].hitType;switch(l){case"event":e._gaCommandSendEventParameters.apply(e,o);break;case"pageview":e._gaCommandSendPageviewParameters.apply(e,o);break;case"timing":e._gaCommandSendTiming.apply(e,m(o.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(l));break;default:console.warn("Send command doesn't exist: ".concat(l))}}),P(this,"_gaCommandSet",function(){for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];typeof o[0]=="string"&&(o[0]=P({},o[0],o[1])),e._gtag("set",e._toGtagOptions(o[0]))}),P(this,"_gaCommand",function(n){for(var o=arguments.length,c=new Array(o>1?o-1:0),l=1;l<o;l++)c[l-1]=arguments[l];switch(n){case"send":e._gaCommandSend.apply(e,c);break;case"set":e._gaCommandSet.apply(e,c);break;default:console.warn("Command doesn't exist: ".concat(n))}}),P(this,"ga",function(){for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];if(typeof o[0]=="string")e._gaCommand.apply(e,o);else{var l=o[0];e._gtag("get",e._currentMeasurementId,"client_id",function(w){e._isQueuing=!1;var O=e._queueGtag;for(l({get:function(G){return G==="clientId"?w:G==="trackingId"?e._currentMeasurementId:G==="apiVersion"?"1":void 0}});O.length;){var S=O.shift();e._gtag.apply(e,m(S))}}),e._isQueuing=!0}return e.ga}),P(this,"event",function(n,o){if(typeof n=="string")e._gtag("event",n,e._toGtagOptions(o));else{var c=n.action,l=n.category,w=n.label,O=n.value,S=n.nonInteraction,k=n.transport;if(!l||!c){console.warn("args.category AND args.action are required in event()");return}var G={hitType:"event",eventCategory:(0,u.default)(l),eventAction:(0,u.default)(c)};w&&(G.eventLabel=(0,u.default)(w)),typeof O<"u"&&(typeof O!="number"?console.warn("Expected `args.value` arg to be a Number."):G.eventValue=O),typeof S<"u"&&(typeof S!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):G.nonInteraction=S),typeof k<"u"&&(typeof k!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(k)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),G.transport=k)),e._gaCommand("send",G)}}),P(this,"send",function(n){e._gaCommand("send",n)}),this.reset()}return F(t,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),t}();r.GA4=p;var v=new p;r.default=v})(ce);(function(r){function i(s){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},i(s)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ReactGAImplementation=void 0;var u=h(ce);function d(s){if(typeof WeakMap!="function")return null;var g=new WeakMap,b=new WeakMap;return(d=function(E){return E?b:g})(s)}function h(s,g){if(!g&&s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var b=d(g);if(b&&b.has(s))return b.get(s);var m={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in s)if(A!=="default"&&Object.prototype.hasOwnProperty.call(s,A)){var I=E?Object.getOwnPropertyDescriptor(s,A):null;I&&(I.get||I.set)?Object.defineProperty(m,A,I):m[A]=s[A]}return m.default=s,b&&b.set(s,m),m}var y=u.GA4;r.ReactGAImplementation=y;var _=u.default;r.default=_})(se);const Q=Ce(se);function oe(r,i){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(r,h).enumerable})),u.push.apply(u,d)}return u}function Y(r){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?oe(Object(u),!0).forEach(function(d){je(r,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):oe(Object(u)).forEach(function(d){Object.defineProperty(r,d,Object.getOwnPropertyDescriptor(u,d))})}return r}function je(r,i,u){return i in r?Object.defineProperty(r,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[i]=u,r}var ae=function(){return window.CLIENT_INFO?window.CLIENT_INFO.ga_id:!1},Re=function(){ae()&&Q.initialize([{trackingId:ae()}])},De=function(i,u){Q.isInitialized||Re(),Q.event(i,Fe(u))},qe=function(i){var u;return(u=i.paymentMethods)!==null&&u!==void 0&&u.includes("kajabi_payments")?Y(Y({},i.additionalPaymentMethodsStatuses),{},{applePayDisplayed:!!window.ApplePaySession}):{}},Fe=function(i){if(!i)return null;var u=i.price,d=i.offer,h=i.site,y=i.member;return Y({siteId:h.id,siteName:h.title,offerId:d.id,offerToken:d.token,offerType:u.priceType,quantityRemainingDisplayed:Ne(d),quantityRemaining:d.quantityRemaining,memberId:y==null?void 0:y.id,checkoutVersion:"popup"},qe(d))},Ne=function(i){return i.quantityRemaining!==void 0&&i.quantityLimitDisplayThreshold!==void 0&&i.quantityLimitDisplayThreshold>=i.quantityRemaining};function He(r,i){const{reset:u,watch:d}=ee(),[h,y]=x.useState(!1),_=d("isPaymentInProgress"),[s,g,b,m]=d(["offer","site","price","member"]),E=x.useCallback(()=>{y(i),document.dispatchEvent(new CustomEvent("kjb:popupCheckout:onOpen",{detail:{offerToken:r}}))},[i,r]),A=x.useCallback(()=>{_||(De("abandoned_checkout",{offer:s,site:g,price:b,member:m}),y(!1),u({}),document.dispatchEvent(new CustomEvent("kjb:popupCheckout:onClose",{detail:{offerToken:r}})))},[u,_,s,g,b,m,r]);return{modalActive:h,handleShowModal:E,handleHideModal:A,site:g}}const Ve=({offerToken:r,checkoutConfig:i})=>{const{getValues:u,setValue:d}=ee();x.useEffect(()=>{d("source","pop_up")},[d]);const{stripe:h,attemptReloadWithCardsOnly:y,currency:_,paymentMethods:s,additionalPaymentMethods:g,vendorAccountId:b}=u(),m=Se(r),{offer:E}=u(),A={checkoutButtonColor:(E==null?void 0:E.checkoutPageColor)||N.SageTokens.COLOR_PALETTE.GREY_900,checkoutButtonStyle:"solid"},I=i||A,T=()=>m!=null&&m.offerDataLoaded?K.jsx(Ee,{checkoutConfig:I,checkoutData:m}):K.jsx(Le,{});return K.jsx(Ge,{attemptReloadWithCardsOnly:y,stripe:h,amountPriceInCents:m==null?void 0:m.amountPriceInCents,currency:_,paymentMethods:s,additionalPaymentMethods:g,vendorAccountId:b,children:T()})};var ze=function(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},C.createElement("title",null,"Close"),C.createElement("path",{d:"M11.1384 1.80458C11.3987 1.54423 11.3987 1.12212 11.1384 0.861766C10.878 0.601416 10.4559 0.601416 10.1956 0.861766L6.00033 5.05703L1.80506 0.861766C1.54471 0.601416 1.1226 0.601416 0.862254 0.861766C0.601905 1.12212 0.601905 1.54423 0.862254 1.80458L5.05752 5.99984L0.862254 10.1951C0.601905 10.4555 0.601905 10.8776 0.862254 11.1379C1.1226 11.3983 1.54471 11.3983 1.80506 11.1379L6.00033 6.94265L10.1956 11.1379C10.4559 11.3983 10.878 11.3983 11.1384 11.1379C11.3987 10.8776 11.3987 10.4555 11.1384 10.1951L6.94313 5.99984L11.1384 1.80458Z",fill:"#202327"}))};function We(r,i){return Ke(r)||Ue(r,i)||Be(r,i)||xe()}function xe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(r,i){if(r){if(typeof r=="string")return ie(r,i);var u=Object.prototype.toString.call(r).slice(8,-1);if(u==="Object"&&r.constructor&&(u=r.constructor.name),u==="Map"||u==="Set")return Array.from(r);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return ie(r,i)}}function ie(r,i){(i==null||i>r.length)&&(i=r.length);for(var u=0,d=new Array(i);u<i;u++)d[u]=r[u];return d}function Ue(r,i){var u=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(u!=null){var d=[],h=!0,y=!1,_,s;try{for(u=u.call(r);!(h=(_=u.next()).done)&&(d.push(_.value),!(i&&d.length===i));h=!0);}catch(g){y=!0,s=g}finally{try{!h&&u.return!=null&&u.return()}finally{if(y)throw s}}return d}}function Ke(r){if(Array.isArray(r))return r}function pe(r){var i=r.active,u=r.offerToken,d=r.handleHideModal,h=r.site,y=ee(),_=y.getValues,s=y.setValue,g=y.watch,b=y.formState;b.isValid,b.errors;var m=Me(),E=m.t,A=_(),I=A.shouldShowGiftModalContents,T=Ae(!1),L=T.shouldShowGiftOptions,j=T.setShouldShowGiftOptions;x.useEffect(function(){j(I)},[I]),x.useEffect(function(){i&&s("source","pop_up")},[i,s]);var R=g("isPaymentInProgress"),M=g("giftDetails"),D=M&&Object.keys(M).length>0,z=C.useState(!1),W=We(z,2),V=W[0],q=W[1],F=N.useSageBreakpoint(),P=function(){D&&(M.recipientEmail||M.purchaserName||M.giftDeliveryDate||M.message!==E("gift_offers.message"))?q(!0):(s("giftDetails",{}),s("shouldShowGiftModalContents",!1),j(!1))},f=function(){s("shouldShowGiftModalContents",!1),j(!1)},a=function(){q(!1),s("shouldShowGiftModalContents",!1)},p=function(){q(!1),s("giftDetails",{}),s("shouldShowGiftModalContents",!1),j(!1)},v=C.createElement(N.Modal.Header,{className:"".concat(L?"visually-hidden":"checkout-modal__header"),customHeader:h&&h.title&&C.createElement("span",{className:"t-sage-body-small-med"},h.title),image:h&&h.logoImageUrl&&{src:h.logoImageUrl,alt:""},aside:C.createElement(N.Button,{"data-testid":"close-modal-button",color:N.Button.COLORS.PRIMARY,onClick:d,subtle:!0,disabled:R,className:"checkout-modal__close-btn"},C.createElement(ze,null))}),t="overflow-scroll-embedded";return C.createElement(C.Fragment,null,C.createElement(Pe,null,C.createElement("html",{className:"checkout-modal__active",lang:"en"})),C.createElement(N.Modal,{className:"checkout-modal sage-scoped",size:"lg",active:i,onExit:d,fullScreen:F==null?void 0:F.sm},L&&C.createElement(C.Fragment,null,C.createElement(ke,{className:"gift-modal",onClose:d,onContinue:f,onCancel:P}),X.createPortal(C.createElement(Ie,{showModal:V,handleAbandonmentCancel:a,handleAbandonmentConfirm:p}),document.body)),v,!L&&C.createElement(N.Modal.Body,{className:t,"data-testid":"popup-modal",style:{height:"100%"}},C.createElement(Ve,{offerToken:u}))))}pe.defaultProps={site:null};function te(r){var i=r.el,u=r.offerToken,d=r.enableModal,h=He(u,d),y=h.modalActive,_=h.handleShowModal,s=h.handleHideModal,g=h.site,b=C.useMemo(function(){return C.createElement("span",{tabIndex:"0",role:"button","aria-label":"Open",dangerouslySetInnerHTML:{__html:i.toString()},onClick:_,onMouseUp:_,onKeyDown:null})},[i,_]),m=y&&C.createElement(N.SageBreakpointProvider,{queries:N.SageTokens.BREAKPOINT_QUERIES},C.createElement(pe,{active:y,offerToken:u,handleHideModal:s,site:g})),E=y&&C.createElement(C.Fragment,null,m);return C.createElement(C.Fragment,null,y&&X.createPortal(E,document.body),b)}te.propTypes={el:U.string.isRequired,offerToken:U.string.isRequired,enableModal:U.bool};te.defaultProps={enableModal:!0};function Z(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Z=function(){return r};var r={},i=Object.prototype,u=i.hasOwnProperty,d=typeof Symbol=="function"?Symbol:{},h=d.iterator||"@@iterator",y=d.asyncIterator||"@@asyncIterator",_=d.toStringTag||"@@toStringTag";function s(f,a,p){return Object.defineProperty(f,a,{value:p,enumerable:!0,configurable:!0,writable:!0}),f[a]}try{s({},"")}catch{s=function(p,v,t){return p[v]=t}}function g(f,a,p,v){var t=a&&a.prototype instanceof E?a:E,e=Object.create(t.prototype),n=new q(v||[]);return e._invoke=function(o,c,l){var w="suspendedStart";return function(O,S){if(w==="executing")throw new Error("Generator is already running");if(w==="completed"){if(O==="throw")throw S;return P()}for(l.method=O,l.arg=S;;){var k=l.delegate;if(k){var G=z(k,l);if(G){if(G===m)continue;return G}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(w==="suspendedStart")throw w="completed",l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);w="executing";var H=b(o,c,l);if(H.type==="normal"){if(w=l.done?"completed":"suspendedYield",H.arg===m)continue;return{value:H.arg,done:l.done}}H.type==="throw"&&(w="completed",l.method="throw",l.arg=H.arg)}}}(f,p,n),e}function b(f,a,p){try{return{type:"normal",arg:f.call(a,p)}}catch(v){return{type:"throw",arg:v}}}r.wrap=g;var m={};function E(){}function A(){}function I(){}var T={};s(T,h,function(){return this});var L=Object.getPrototypeOf,j=L&&L(L(F([])));j&&j!==i&&u.call(j,h)&&(T=j);var R=I.prototype=E.prototype=Object.create(T);function M(f){["next","throw","return"].forEach(function(a){s(f,a,function(p){return this._invoke(a,p)})})}function D(f,a){function p(t,e,n,o){var c=b(f[t],f,e);if(c.type!=="throw"){var l=c.arg,w=l.value;return w&&typeof w=="object"&&u.call(w,"__await")?a.resolve(w.__await).then(function(O){p("next",O,n,o)},function(O){p("throw",O,n,o)}):a.resolve(w).then(function(O){l.value=O,n(l)},function(O){return p("throw",O,n,o)})}o(c.arg)}var v;this._invoke=function(t,e){function n(){return new a(function(o,c){p(t,e,o,c)})}return v=v?v.then(n,n):n()}}function z(f,a){var p=f.iterator[a.method];if(p===void 0){if(a.delegate=null,a.method==="throw"){if(f.iterator.return&&(a.method="return",a.arg=void 0,z(f,a),a.method==="throw"))return m;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var v=b(p,f.iterator,a.arg);if(v.type==="throw")return a.method="throw",a.arg=v.arg,a.delegate=null,m;var t=v.arg;return t?t.done?(a[f.resultName]=t.value,a.next=f.nextLoc,a.method!=="return"&&(a.method="next",a.arg=void 0),a.delegate=null,m):t:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,m)}function W(f){var a={tryLoc:f[0]};1 in f&&(a.catchLoc=f[1]),2 in f&&(a.finallyLoc=f[2],a.afterLoc=f[3]),this.tryEntries.push(a)}function V(f){var a=f.completion||{};a.type="normal",delete a.arg,f.completion=a}function q(f){this.tryEntries=[{tryLoc:"root"}],f.forEach(W,this),this.reset(!0)}function F(f){if(f){var a=f[h];if(a)return a.call(f);if(typeof f.next=="function")return f;if(!isNaN(f.length)){var p=-1,v=function t(){for(;++p<f.length;)if(u.call(f,p))return t.value=f[p],t.done=!1,t;return t.value=void 0,t.done=!0,t};return v.next=v}}return{next:P}}function P(){return{value:void 0,done:!0}}return A.prototype=I,s(R,"constructor",I),s(I,"constructor",A),A.displayName=s(I,_,"GeneratorFunction"),r.isGeneratorFunction=function(f){var a=typeof f=="function"&&f.constructor;return!!a&&(a===A||(a.displayName||a.name)==="GeneratorFunction")},r.mark=function(f){return Object.setPrototypeOf?Object.setPrototypeOf(f,I):(f.__proto__=I,s(f,_,"GeneratorFunction")),f.prototype=Object.create(R),f},r.awrap=function(f){return{__await:f}},M(D.prototype),s(D.prototype,y,function(){return this}),r.AsyncIterator=D,r.async=function(f,a,p,v,t){t===void 0&&(t=Promise);var e=new D(g(f,a,p,v),t);return r.isGeneratorFunction(a)?e:e.next().then(function(n){return n.done?n.value:e.next()})},M(R),s(R,_,"Generator"),s(R,h,function(){return this}),s(R,"toString",function(){return"[object Generator]"}),r.keys=function(f){var a=[];for(var p in f)a.push(p);return a.reverse(),function v(){for(;a.length;){var t=a.pop();if(t in f)return v.value=t,v.done=!1,v}return v.done=!0,v}},r.values=F,q.prototype={constructor:q,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(V),!a)for(var p in this)p.charAt(0)==="t"&&u.call(this,p)&&!isNaN(+p.slice(1))&&(this[p]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var p=this;function v(l,w){return n.type="throw",n.arg=a,p.next=l,w&&(p.method="next",p.arg=void 0),!!w}for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t],n=e.completion;if(e.tryLoc==="root")return v("end");if(e.tryLoc<=this.prev){var o=u.call(e,"catchLoc"),c=u.call(e,"finallyLoc");if(o&&c){if(this.prev<e.catchLoc)return v(e.catchLoc,!0);if(this.prev<e.finallyLoc)return v(e.finallyLoc)}else if(o){if(this.prev<e.catchLoc)return v(e.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return v(e.finallyLoc)}}}},abrupt:function(a,p){for(var v=this.tryEntries.length-1;v>=0;--v){var t=this.tryEntries[v];if(t.tryLoc<=this.prev&&u.call(t,"finallyLoc")&&this.prev<t.finallyLoc){var e=t;break}}e&&(a==="break"||a==="continue")&&e.tryLoc<=p&&p<=e.finallyLoc&&(e=null);var n=e?e.completion:{};return n.type=a,n.arg=p,e?(this.method="next",this.next=e.finallyLoc,m):this.complete(n)},complete:function(a,p){if(a.type==="throw")throw a.arg;return a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):a.type==="normal"&&p&&(this.next=p),m},finish:function(a){for(var p=this.tryEntries.length-1;p>=0;--p){var v=this.tryEntries[p];if(v.finallyLoc===a)return this.complete(v.completion,v.afterLoc),V(v),m}},catch:function(a){for(var p=this.tryEntries.length-1;p>=0;--p){var v=this.tryEntries[p];if(v.tryLoc===a){var t=v.completion;if(t.type==="throw"){var e=t.arg;V(v)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,p,v){return this.delegate={iterator:F(a),resultName:p,nextLoc:v},this.method==="next"&&(this.arg=void 0),m}},r}function ue(r,i,u,d,h,y,_){try{var s=r[y](_),g=s.value}catch(b){u(b);return}s.done?i(g):Promise.resolve(g).then(d,h)}function $e(r){return function(){var i=this,u=arguments;return new Promise(function(d,h){var y=r.apply(i,u);function _(g){ue(y,d,h,_,s,"next",g)}function s(g){ue(y,d,h,_,s,"throw",g)}_(void 0)})}}function le(r,i){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);i&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(r,h).enumerable})),u.push.apply(u,d)}return u}function $(r){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?le(Object(u),!0).forEach(function(d){Qe(r,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):le(Object(u)).forEach(function(d){Object.defineProperty(r,d,Object.getOwnPropertyDescriptor(u,d))})}return r}function Qe(r,i,u){return i in r?Object.defineProperty(r,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[i]=u,r}function me(r){var i=r.children,u=r.values,d=u.externalReference,h=u.excludePreviousPurchase,y=ge({mode:"onChange",defaultValues:$($($({},be),d&&Object.keys(d).length>0&&{externalReference:d}),h&&{excludePreviousPurchase:h}),resolver:ye(_e)});return C.createElement(ve,y,i)}function he(r){return J.apply(this,arguments)}function J(){return J=$e(Z().mark(function r(i){var u,d,h,y,_,s,g;return Z().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:we({tags:{team:"Commerce",component:"popup-checkout"}}),document.body.classList.add("sage-excluded"),h=document.querySelectorAll('[id^="popup-checkout-"]').length+1,i.outerHTML="<span key='popup-checkout-".concat(h,"' id='popup-checkout-").concat(h,"'>").concat(i.outerHTML,"</span>"),y=document.querySelector("#popup-checkout-".concat(h)),_=i.href.split("#").pop().replace("popup_checkout_",""),s=!!((u=window.Kajabi)!==null&&u!==void 0&&(d=u.theme)!==null&&d!==void 0&&d.editor),g=function(){if(!i.dataset.popupCheckout)return{};try{return JSON.parse(atob(i.dataset.popupCheckout))}catch{return{}}},X.render(C.createElement(Te,null,C.createElement(me,{values:g()},C.createElement(Oe,null,C.createElement(te,{el:i.outerHTML,offerToken:_,enableModal:!s})))),y,function(){document.dispatchEvent(new CustomEvent("kjb:popupCheckout:onInit",{detail:{offerToken:_}}))});case 9:case"end":return m.stop()}},r)})),J.apply(this,arguments)}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[href^="#popup_checkout"]').forEach(function(r){he(r)})});document.addEventListener("kjb:popupCheckout:init",function(r){var i=r.detail.link;he(i)});me.defaultProps={values:{}};
//# sourceMappingURL=index-c157a930.js.map
